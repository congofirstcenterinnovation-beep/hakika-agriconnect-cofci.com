<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AgriConnect Africa</title>

<style>
body{
font-family: Arial, sans-serif;
margin:0;
background:#f4f6f8;
}

/* HEADER */
header{
background:#2E7D32;
color:white;
padding:15px;
text-align:center;
font-weight:bold;
}

nav{
display:flex;
justify-content:center;
gap:10px;
flex-wrap:wrap;
background:#1B5E20;
padding:10px;
}

nav button{
background:white;
border:none;
padding:8px 14px;
border-radius:20px;
cursor:pointer;
font-size:13px;
}

/* SECTIONS */
section{
display:none;
padding:20px;
}

.active{
display:block;
}

/* HERO */
.hero{
text-align:center;
padding:30px;
}

.hero img{
width:100%;
max-width:350px;
border-radius:10px;
}

/* BUTTON */
.actionBtn{
background:#2E7D32;
color:white;
border:none;
padding:10px 18px;
border-radius:25px;
cursor:pointer;
font-size:14px;
margin-top:10px;
}

/* PRODUITS */
.product{
background:white;
padding:15px;
margin-top:10px;
border-radius:10px;
box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

.product img{
width:100%;
border-radius:10px;
}

/* FORM POPUP */
.popup{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.5);
display:none;
justify-content:center;
align-items:center;
}

.popupContent{
background:white;
padding:20px;
border-radius:10px;
width:90%;
max-width:350px;
}

input, textarea{
width:100%;
padding:8px;
margin-top:8px;
border-radius:8px;
border:1px solid #ccc;
}

/* CHAT */
.chatBox{
height:250px;
overflow-y:auto;
background:white;
padding:10px;
border-radius:10px;
}

</style>
</head>

<body>

<header>üåç Connecter les agriculteurs africains au march√© r√©el</header>

<nav>
<button onclick="show('home')">Accueil</button>
<button onclick="show('market')">Marketplace</button>
<button onclick="show('ai')">Assistant IA</button>
<button onclick="show('meteo')">M√©t√©o</button>
<button onclick="show('gps')">Localisation</button>
</nav>

<!-- ACCUEIL -->
<section id="home" class="active">
<div class="hero">
<img src="https://images.unsplash.com/photo-1500382017468-9049fed747ef">
<h2>Vendez vos r√©coltes directement</h2>
<p>Plateforme digitale pour agriculteurs africains.</p>
</div>
</section>

<!-- MARKETPLACE -->
<section id="market">
<h2>Marketplace Agricole</h2>

<button class="actionBtn" onclick="openPopup()">Publier vos produits ici</button>

<div id="products"></div>
</section>

<!-- IA -->
<section id="ai">
<h2>Assistant Agricole IA</h2>
<div class="chatBox" id="aiChat"></div>
<input id="aiInput" placeholder="Pose ta question agricole">
<button class="actionBtn" onclick="askAI()">Envoyer</button>
</section>

<!-- METEO -->
<section id="meteo">
<h2>M√©t√©o Agricole</h2>
<div id="weather"></div>
</section>

<!-- GPS -->
<section id="gps">
<h2>Localiser mon champ</h2>
<button class="actionBtn" onclick="getLocation()">Obtenir localisation</button>
<p id="location"></p>
</section>

<!-- POPUP FORM -->
<div class="popup" id="popup">
<div class="popupContent">
<h3>Publier Produit</h3>

<input id="pName" placeholder="Nom produit">
<input id="pPrice" placeholder="Prix">
<input id="pPhone" placeholder="Num√©ro">
<input type="file" id="pImg">

<button class="actionBtn" onclick="publish()">Publier</button>
<button onclick="closePopup()">Fermer</button>
</div>
</div>

<script>

/* NAV */
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

/* POPUP */
function openPopup(){ document.getElementById("popup").style.display="flex"; }
function closePopup(){ document.getElementById("popup").style.display="none"; }

/* MARKETPLACE */
let products = JSON.parse(localStorage.getItem("products")) || [];

function publish(){

let name = pName.value;
let price = pPrice.value;
let phone = pPhone.value;
let file = pImg.files[0];

if(!file) return alert("Ajoute image");

let reader = new FileReader();

reader.onload = function(){
let product = {
name,
price,
phone,
img:reader.result
};

products.push(product);
localStorage.setItem("products", JSON.stringify(products));

displayProducts();
closePopup();
};

reader.readAsDataURL(file);
}

function displayProducts(){
let container = document.getElementById("products");
container.innerHTML="";

products.forEach((p,i)=>{

container.innerHTML+=`
<div class="product">
<img src="${p.img}">
<h3>${p.name}</h3>
<p>üí∞ ${p.price}</p>
<p>üìû ${p.phone}</p>

<button class="actionBtn" onclick="buy('${p.phone}')">Acheter</button>
<button onclick="share(${i})">Partager</button>

</div>
`;
});
}

displayProducts();

function buy(phone){
window.location.href="tel:"+phone;
}

function share(i){
let link = location.href+"#product"+i;
navigator.clipboard.writeText(link);
alert("Lien copi√© !");
}

/* IA AGRICOLE */
function askAI(){
let input = aiInput.value.toLowerCase();
let chat = document.getElementById("aiChat");

let rep="";

if(input.includes("engrais"))
rep="Utilisez compost organique ou NPK √©quilibr√©.";

else if(input.includes("pluie"))
rep="Planifiez semis avant saison pluvieuse.";

else
rep="Je conseille rotation cultures et analyse sol.";

chat.innerHTML+=`<p><b>Vous:</b> ${input}</p>`;
chat.innerHTML+=`<p><b>IA:</b> ${rep}</p>`;
}

/* METEO */
async function loadWeather(){
let res = await fetch("https://api.openweathermap.org/data/2.5/weather?q=Goma&appid=YOUR_API_KEY&units=metric");
let data = await res.json();

weather.innerHTML=`üå§ ${data.main.temp}¬∞C - ${data.weather[0].description}`;
}
loadWeather();

/* GPS */
function getLocation(){
navigator.geolocation.getCurrentPosition(pos=>{
location.innerText=`Latitude: ${pos.coords.latitude} Longitude: ${pos.coords.longitude}`;
});
}

</script>

</body>
</html>
